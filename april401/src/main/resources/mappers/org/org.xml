<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.april.groupware.org">

    <!-- 공통 컬럼 -->
    <sql id="orgColumns">
            id,
		    password,
		    dept_nm as deptNm,
		    dept_cd as deptCd,
		    parent_dept_cd as parentDeptCd,
		    auth,
		    name,
		    position,
		    mobile,
		    email,
		    address,
		    hire_date as hiredate,
		    birth,
		    vacation_cnt as vacationCnt,
		    military_yn as militaryYN,
		    dspsn_yn as dspsnYN,
		    grade,
		    org_file_nm as orgFileName,
		    mod_file_nm as modFileName,
		    img_path as imgPath,
		    ext,
		    file_size as fileSize,
		    reg_id as regId,
		    TO_CHAR(reg_date, 'YYYY/MM/DD HH24:MI:SS') as regDate, 
		    mod_id as modId,
		    TO_CHAR(mod_date, 'YYYY/MM/DD HH24:MI:SS') as modDate
    </sql>
   
    
	<!-- 등록 : namespace+id = com.sist.ehr.board.doInsert -->
	<insert id="doInsert" parameterType="OrgVO">
		INSERT INTO organization (
				    id,
				    password,
				    dept_nm,
				    dept_cd,
				    parent_dept_cd,
				    auth,
				    name,
				    position,
				    mobile,
				    email,
				    address,
				    hire_date,
				    birth,
				    vacation_cnt,
				    military_yn,
				    dspsn_yn,
				    grade,
				    org_file_nm,
				    mod_file_nm,
				    img_path,
				    ext,
				    file_size,
				    reg_id,
				    reg_date,
				    mod_id,
				    mod_date
		) VALUES (
					#{id},			
					#{password},
					#{deptNm},
					#{deptCd},
					#{parentDeptCd},
					#{auth},
					#{name},
					#{position},
					#{mobile},
					#{email},
					#{address},
					#{hiredate},
					#{birth},
					#{vacationCnt},
					#{militaryYN},
					#{dspsnYN},
					#{grade},
					#{orgFileName},
					#{modFileName},
					#{imgPath},
					#{ext},
					#{fileSize},
					#{regId},
					sysdate, 
					#{modId},
					sysdate
		)
	</insert>
	

	<update id="doUpdate" parameterType="OrgVO">
		UPDATE organization 
		SET		    id = #{id},
				    password = #{password},
				    dept_nm = #{deptNm},
				    dept_cd = #{deptCd},
				    parent_dept_cd = #{parentDeptCd},
				    auth = #{auth},
				    name = #{name},
				    position = #{position},
				    hire_date = #{hiredate},
				    vacation_cnt = #{vacationCnt},
				    mod_id = #{modId},
				    mod_date = sysdate
		 WHERE id = #{id}  
			 
	</update>
    
    
     
    <!-- 단건조회 -->
    <select id="doSelectOne" parameterType="OrgVO" resultType="OrgVO">
		SELECT
		    <include refid="orgColumns"/>
		FROM organization
		WHERE id = #{id}  
    </select>
    
    
    
    
    
</mapper>